{% extends "index.html" %}
{% block content %}
<h2>Manage Loans</h2>
<table border="1">
    <tr><th>Loan ID</th><th>Book ID</th><th>Patron ID</th><th>Due Date</th><th>Status</th></tr>
    {% for loan in loans %}
    <tr>
        <td>{{ loan.loan_id }}</td>
        <td>{{ loan.book_id }}</td>
        <td>{{ loan.patron_id }}</td>
        <td>{{ loan.due_date }}</td>
        <td>{{ loan.status }}</td>
    </tr>
    {% endfor %}
</table>

<h3>Overdue Loans</h3>
<ul>
    {% for loan in overdue_loans %}
    <li>{{ loan }}</li>
    {% endfor %}
</ul>

<h3>Add Loan</h3>
<form method="POST">
    <input type="hidden" name="action" value="add">
    Loan ID: <input name="loan_id" type="number"><br>
    Book ID: <input name="book_id" type="number"><br>
    Patron ID: <input name="patron_id" type="number"><br>
    Due Date (YYYY-MM-DD, blank for +10 days): <input name="due_date" type="date"><br>
    <button type="submit">Add</button>
</form>

<h3>Edit Loan (Leave blank to keep current)</h3>
<form method="POST">
    <input type="hidden" name="action" value="edit">
    Loan ID: <input name="loan_id" type="number" required><br>
    New Due Date (YYYY-MM-DD): <input name="due_date" type="date"><br>
    New Status: <input name="status"><br>
    <button type="submit">Edit</button>
</form>

<h3>Delete Loan</h3>
<form method="POST">
    <input type="hidden" name="action" value="delete">
    Loan ID: <input name="loan_id" type="number" required><br>
    <button type="submit">Delete</button>
</form>

<h3>Pay Fines</h3>
<form method="POST">
    <input type="hidden" name="action" value="pay_fines">
    Patron ID: <input name="patron_id" type="number" required><br>
    Amount: <input name="amount" type="number" step="0.01"><br>
    <button type="submit">Pay</button>
</form>

<h3>Report Lost</h3>
<form method="POST">
    <input type="hidden" name="action" value="report_lost">
    Loan ID: <input name="loan_id" type="number" required><br>
    <button type="submit">Report</button>
</form>
{% endblock %}
